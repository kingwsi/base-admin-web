(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a3f1"],{bb61:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"描述"}},[a("a-input",{attrs:{placeholder:"描述"},model:{value:e.queryParam.description,callback:function(t){e.$set(e.queryParam,"description",t)},expression:"queryParam.description"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"地址"}},[a("a-input",{attrs:{placeholder:"地址"},model:{value:e.queryParam.path,callback:function(t){e.$set(e.queryParam,"path",t)},expression:"queryParam.path"}})],1)],1),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,scroll:{x:800}},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确认删除这条数据？","ok-text":"确认",okType:"danger","cancel-text":"取消",placement:"left"},on:{confirm:function(t){return e.handleDelete(n)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a",{staticStyle:{color:"#ff4d4f"}},[e._v("删除")])],1)]],2)}}])}),a("form-modal",{ref:"formModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},i=[],o=(a("d3b7"),a("5530")),r=a("2af9"),l=(a("99af"),a("b775")),s={Page:"/api/api-whitelist/page",Add:"/api/api-whitelist",Update:"/api/api-whitelist",Delete:"/api/api-whitelist"};function d(e){return Object(l["b"])({url:s.Page,method:"get",params:e})}function c(e){return Object(l["b"])({url:s.Add,method:"post",data:e})}function m(e){return Object(l["b"])({url:s.Update,method:"put",data:e})}function u(e){return Object(l["b"])({url:"".concat(s.Delete,"/").concat(e),method:"delete"})}var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.model&&e.model.id?"修改":"新增",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form-model",e._b({ref:"form",attrs:{model:e.model,rules:e.rules}},"a-form-model",e.formLayout,!1),[a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"ID"}},[e.model.id?a("a-input",{attrs:{disabled:""}}):e._e()],1),a("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[a("a-input",{attrs:{placeholder:"请输入描述"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("a-form-model-item",{attrs:{label:"地址",prop:"path"}},[a("a-input",{attrs:{placeholder:"请输入地址"},model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}})],1),a("a-form-model-item",{attrs:{label:"请求方式",prop:"methods"}},[a("a-input",{attrs:{placeholder:"请求方式，分号隔开"},model:{value:e.model.methods,callback:function(t){e.$set(e.model,"methods",t)},expression:"model.methods"}})],1)],1)],1)],1)},p=[],h={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:{},rules:{description:[{required:!0,message:"请输入描述",trigger:"change"}],methods:[{required:!0,message:"请输入请求方式",trigger:"change"}],path:[{required:!0,message:"请输入地址",trigger:"change"}]}}},created:function(){}},b=h,g=a("2877"),v=Object(g["a"])(b,f,p,!1,null,null,null),y=v.exports,$={name:"ApiWhitelist",components:{STable:r["b"],FormModal:y},data:function(){var e=this;return{visible:!1,warningVisible:!1,confirmLoading:!1,mdl:{},advanced:!1,queryParam:{},columns:[{title:"描述",dataIndex:"description"},{title:"地址",dataIndex:"path"},{title:"请求方式",dataIndex:"methods"},{title:"操作",dataIndex:"action",width:"110px",fixed:"right",scopedSlots:{customRender:"action"}}],loadData:function(t){return d(Object.assign(t||{},e.queryParam)).then((function(e){return e.data}))}}},created:function(){this.loadData()},methods:{handleAdd:function(){this.mdl={},this.visible=!0},handleEdit:function(e){this.visible=!0,this.mdl=Object(o["a"])({},e)},handleOk:function(){var e=this,t=this.$refs.formModal.$refs.form;this.confirmLoading=!0,t.validate((function(a){if(!a)return e.confirmLoading=!1,!1;e.mdl.id?m(e.mdl).then((function(a){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.info("修改成功")})).catch((function(t){e.$message.error("修改失败")})).finally((function(){e.confirmLoading=!1})):c(e.mdl).then((function(a){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.info("新增成功")})).catch((function(t){e.$message.error("修改失败")})).finally((function(){e.confirmLoading=!1}))}))},toggleAdvanced:function(){this.advanced=!this.advanced},handleCancel:function(){this.visible=!1;var e=this.$refs.formModal.$refs.form;e.resetFields()},handleDelete:function(e){var t=this;u(e.id).then((function(e){200===e.code?(t.$message.info("删除成功！"),t.$refs.table.refresh()):t.$message.err("删除失败！")}))}}},w=$,k=Object(g["a"])(w,n,i,!1,null,null,null);t["default"]=k.exports}}]);