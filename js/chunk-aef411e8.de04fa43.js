(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aef411e8"],{"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7"),a("e6cf");function n(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(d){return void a(d)}o.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(i,r){var s=e.apply(t,a);function o(e){n(s,i,r,o,l,"next",e)}function l(e){n(s,i,r,o,l,"throw",e)}o(void 0)}))}}},"35e0":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("b775"),i={UploadImage:"/api/oss/image"};function r(e){return Object(n["b"])({url:i.UploadImage,method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}},6648:function(e,t,a){"use strict";var n=a("fa41"),i=a.n(n);i.a},"7a4d":function(e,t,a){},"918b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{"custom-request":e.customUpload,"list-type":"picture-card","file-list":e.fileList,remove:e.handleRemove},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<e.max?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],r=(a("99af"),a("4de4"),a("4160"),a("a9e3"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),s=a("35e0"),o={name:"CUpload",props:{files:{type:null,require:!0,default:function(){return""}},max:{type:Number,require:!1,default:function(){return 1}},format:{type:String,require:!1,default:function(){return"array"}}},watch:{files:function(e,t){var a=this;if(null==this.fileList||this.fileList.length<1){var n=[];n=e instanceof Array?e:e.split(";");var i=0;n.forEach((function(e){i++,a.fileList.push({uid:i,name:"".concat(i,".jpg"),url:e,response:e})}))}},deep:!0,immediate:!0},data:function(){return{previewVisible:!1,previewImage:"",fileList:[]}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},customUpload:function(e){var t=this,a=new FormData;a.append("file",e.file),e.onProgress(),Object(s["a"])(a).then((function(a){if(200===a.code){if(t.files instanceof Array)t.files.push(a.data);else{var n=a.data;t.files&&"undefined"!==t.files&&(n="".concat(t.files,";").concat(a.data)),t.$emit("update:files",n)}e.onSuccess(a.data,e)}else e.onError()})).catch((function(a){t.$message.error("图片上传失败！"),e.onError()}))},handleRemove:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.files instanceof Array?t.files.filter((function(t){return t.url!==e.response})):(n=t.files.replace(e.response),t.$emit("update:files","undefined"===n?"":n)),a.abrupt("return",!0);case 2:case"end":return a.stop()}}),a)})))()}}},l=o,d=(a("6648"),a("2877")),u=Object(d["a"])(l,n,i,!1,null,null,null);t["a"]=u.exports},b3fc:function(e,t,a){"use strict";var n=a("7a4d"),i=a.n(n);i.a},dd34:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide page-header-wrapper-grid-content-main"},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,lg:24}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"account-center-avatarHolder"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.user.avatar}}),a("span",{staticClass:"edit-btn",on:{click:e.edit}},[a("a-icon",{attrs:{type:"edit"}})],1)]),a("div",{staticClass:"username"},[e._v(e._s(e.user.nickname))]),a("div",{staticClass:"bio"},[e._v(e._s(e.user.introduction||"什么介绍都没有"))])]),a("div",{staticClass:"account-center-detail"},[a("p",[a("i",{staticClass:"title"}),e._v("登录名: "+e._s(e.user.username)+" ")]),a("p",[a("i",{staticClass:"group"}),e._v("全称: "+e._s(e.user.fullname)+" ")]),a("p",[a("i",{staticClass:"address"}),a("span",[e._v("浙江省")]),a("span",[e._v("杭州市")])])]),a("a-divider"),a("div",{staticClass:"account-center-tags"},[a("div",{staticClass:"tagsTitle"},[e._v("角色")]),a("div",[e._l(e.user.roles,(function(t,n){return[a("a-tooltip",{key:n},[a("template",{slot:"title"},[e._v(" "+e._s(t.description||t.name)+" ")]),a("a-tag",{key:n},[e._v(e._s(t.name))])],2)]}))],2)])],1)],1)],1),a("edit",{ref:"editModal",attrs:{visible:e.editVisible,loading:e.confirmLoading,model:e.mdl},on:{cancel:function(t){e.editVisible=!1},ok:e.handleOk}})],1)},i=[],r=(a("d3b7"),a("5530")),s=a("680a"),o=a("5880"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"修改",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form-model",e._b({ref:"form",attrs:{model:e.model,rules:e.rules}},"a-form-model",e.formLayout,!1),[a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"ID"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.id,callback:function(t){e.$set(e.model,"id",t)},expression:"model.id"}})],1),a("a-form-model-item",{attrs:{label:"头像"}},[a("c-upload",{attrs:{files:e.model.avatar,max:1},on:{"update:files":function(t){return e.$set(e.model,"avatar",t)}}})],1),a("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),e.model&&e.model.id?e._e():a("a-form-model-item",{attrs:{label:"密码",placeholder:"请输入密码，8-16位,字母数字混合",prop:"password"}},[a("a-input",{model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("a-form-model-item",{attrs:{label:"昵称",prop:"nickname"}},[a("a-input",{model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),a("a-form-model-item",{attrs:{label:"全称",prop:"fullName"}},[a("a-input",{model:{value:e.model.fullName,callback:function(t){e.$set(e.model,"fullName",t)},expression:"model.fullName"}})],1),a("a-form-model-item",{attrs:{label:"介绍",prop:"introduction"}},[a("a-input",{attrs:{type:"textarea"},model:{value:e.model.introduction,callback:function(t){e.$set(e.model,"introduction",t)},expression:"model.introduction"}})],1),a("a-form-model-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("a-input",{model:{value:e.model.oldPassword,callback:function(t){e.$set(e.model,"oldPassword",t)},expression:"model.oldPassword"}})],1),a("a-form-model-item",{attrs:{label:"新密码",prop:"password"}},[a("a-input",{model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("a-form-model-item",{attrs:{label:"重复密码",prop:"repeatPassword"}},[a("a-input",{model:{value:e.model.repeatPassword,callback:function(t){e.$set(e.model,"repeatPassword",t)},expression:"model.repeatPassword"}})],1)],1)],1)],1)},d=[],u=a("918b"),c={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},components:{CUpload:u["a"]},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:{},roleList:[],uploadLoading:!1,rules:{fullName:[{required:!0,message:"请输入全称",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"change"}],nickname:[{required:!0,message:"请输入昵称",trigger:"change"}],oldPassword:[{required:!0,message:"请输入密码，8-16位,字母数字混合",trigger:"change"}]}}},created:function(){},methods:{handleChange:function(e){"uploading"===e.file.status&&(this.uploadLoading=!0)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),t&&a}}},m=c,f=a("2877"),p=Object(f["a"])(m,l,d,!1,null,null,null),v=p.exports,h=a("c24f"),g={components:{RouteView:s["d"],PageView:s["c"],Edit:v},data:function(){return{editVisible:!1,tagInputValue:"",user:{},confirmLoading:!1,mdl:{},images:[]}},computed:Object(r["a"])({},Object(o["mapGetters"])(["nickname","avatar"])),mounted:function(){this.getCurrentUser()},methods:{getTeams:function(){var e=this;this.$http.get("/workplace/teams").then((function(t){e.teams=t.result,e.teamSpinning=!1}))},getCurrentUser:function(){this.user=this.$store.getters.info,this.teamSpinning=!1},edit:function(){var e=this;this.editVisible=!0,this.$nextTick((function(){e.mdl=Object.assign({},e.user),e.mdl.password=""}))},handleOk:function(){var e=this,t=this.$refs.editModal.$refs.form;this.confirmLoading=!0,this.mdl.password&&this.mdl.password!==this.mdl.repeatPassword?this.$message.error("两次输入的密码不相同!"):t.validate((function(t){if(!t)return e.confirmLoading=!1,!1;e.mdl.id&&Object(h["g"])(e.mdl).then((function(t){e.editVisible=!1,e.confirmLoading=!1,e.$message.info("修改成功"),location.reload()})).finally((function(){e.confirmLoading=!1}))}))}}},b=g,w=(a("b3fc"),Object(f["a"])(b,n,i,!1,null,"03029962",null));t["default"]=w.exports},fa41:function(e,t,a){}}]);