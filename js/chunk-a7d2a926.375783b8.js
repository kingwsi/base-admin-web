(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7d2a926"],{"10bc":function(e,t,a){"use strict";var n=a("1aa8"),r=a.n(n);r.a},"1aa8":function(e,t,a){},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7"),a("e6cf");function n(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var o=e.apply(t,a);function l(e){n(o,r,i,l,s,"next",e)}function s(e){n(o,r,i,l,s,"throw",e)}l(void 0)}))}}},"35e0":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("b775"),r={UploadImage:"/api/oss/image"};function i(e){return Object(n["b"])({url:r.UploadImage,method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}},6648:function(e,t,a){"use strict";var n=a("fa41"),r=a.n(n);r.a},"918b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{"custom-request":e.customUpload,"list-type":"picture-card","file-list":e.fileList,remove:e.handleRemove},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<e.max?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},r=[],i=(a("99af"),a("4de4"),a("4160"),a("a9e3"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),o=a("35e0"),l={name:"CUpload",props:{files:{type:null,require:!0,default:function(){return""}},max:{type:Number,require:!1,default:function(){return 1}},format:{type:String,require:!1,default:function(){return"array"}}},watch:{files:function(e,t){var a=this;if(null==this.fileList||this.fileList.length<1){var n=[];n=e instanceof Array?e:e.split(";");var r=0;n.forEach((function(e){r++,a.fileList.push({uid:r,name:"".concat(r,".jpg"),url:e,response:e})}))}},deep:!0,immediate:!0},data:function(){return{previewVisible:!1,previewImage:"",fileList:[]}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},customUpload:function(e){var t=this,a=new FormData;a.append("file",e.file),e.onProgress(),Object(o["a"])(a).then((function(a){if(200===a.code){if(t.files instanceof Array)t.files.push(a.data);else{var n=a.data;t.files&&"undefined"!==t.files&&(n="".concat(t.files,";").concat(a.data)),t.$emit("update:files",n)}e.onSuccess(a.data,e)}else e.onError()})).catch((function(a){t.$message.error("图片上传失败！"),e.onError()}))},handleRemove:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.files instanceof Array?t.files.filter((function(t){return t.url!==e.response})):(n=t.files.replace(e.response),t.$emit("update:files","undefined"===n?"":n)),a.abrupt("return",!0);case 2:case"end":return a.stop()}}),a)})))()}}},s=l,c=(a("6648"),a("2877")),u=Object(c["a"])(s,n,r,!1,null,null,null);t["a"]=u.exports},bbed:function(e,t,a){"use strict";var n=a("de1c"),r=a.n(n);r.a},cc5e:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a("b775"),r={RoleList:"/api/role/page",Permission:"/api/role/resources",Role:"/api/role"};function i(e){return Object(n["b"])({url:r.RoleList,method:"get",params:e})}function o(e){return Object(n["b"])({url:r.Permission,method:"get",params:{id:e}})}function l(e){return Object(n["b"])({url:r.Permission,method:"put",data:e})}function s(e){return Object(n["b"])({url:r.Role,method:"post",data:e})}function c(e){return Object(n["b"])({url:r.Role,method:"put",data:e})}function u(e){return Object(n["b"])({url:"".concat(r.Role,"/list"),method:"get",params:e})}},de1c:function(e,t,a){},f151:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"资源名称"}},[a("a-input",{attrs:{placeholder:"资源名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"类型"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":"ROUTE"},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[a("a-select-option",{attrs:{value:"MENU"}},[e._v("菜单")]),a("a-select-option",{attrs:{value:"API"}},[e._v("接口")]),a("a-select-option",{attrs:{value:"BUTTON"}},[e._v("按钮")])],1)],1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"调用次数"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:e.queryParam.callNo,callback:function(t){e.$set(e.queryParam,"callNo",t)},expression:"queryParam.callNo"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"更新日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入更新日期"},model:{value:e.queryParam.date,callback:function(t){e.$set(e.queryParam,"date",t)},expression:"queryParam.date"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"使用状态"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":"0"},model:{value:e.queryParam.useStatus,callback:function(t){e.$set(e.queryParam,"useStatus",t)},expression:"queryParam.useStatus"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("关闭")]),a("a-select-option",{attrs:{value:"2"}},[e._v("运行中")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"使用状态"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":"0"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("关闭")]),a("a-select-option",{attrs:{value:"2"}},[e._v("运行中")])],1)],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("a-avatar",e?{attrs:{src:e}}:{attrs:{icon:"user"}})],1)}},{key:"status",fn:function(t){return a("span",{},["1"===t?a("a-tag",{attrs:{color:"green"}},[e._v("启用")]):a("a-tag",{attrs:{color:"red"}},[e._v("禁用")])],1)}},{key:"action",fn:function(t,n){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确认重置密码？","ok-text":"确认",okType:"danger","cancel-text":"取消",placement:"left"},on:{confirm:function(t){return e.handleResetPassword(n)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a",{staticStyle:{color:"#1890ff"}},[e._v("重置密码")])],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确认删除这条数据？","ok-text":"确认",okType:"danger","cancel-text":"取消",placement:"left"},on:{confirm:function(t){return e.handleDelete(n)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a",{staticStyle:{color:"#ff4d4f"}},[e._v("删除")])],1)]],2)}}])}),a("create-form",{ref:"createModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}}),a("reset-result",{attrs:{visible:e.resetResultVisible,text:e.resultPwd},on:{cancel:function(t){e.resetResultVisible=!1}}})],1)},r=[],i=a("c1df"),o=a.n(i),l=a("2af9"),s=a("c24f"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.model&&e.model.id?"修改":"新增",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form-model",e._b({ref:"form",attrs:{model:e.model,rules:e.rules}},"a-form-model",e.formLayout,!1),[a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:e.model&&e.model.id,expression:"model && model.id"}],attrs:{label:"ID"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.id,callback:function(t){e.$set(e.model,"id",t)},expression:"model.id"}})],1),a("a-form-model-item",{attrs:{label:"头像"}},[a("c-upload",{attrs:{files:e.model.avatar,max:1},on:{"update:files":function(t){return e.$set(e.model,"avatar",t)}}})],1),a("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[a("a-input",{attrs:{disabled:!(!e.model||!e.model.id),placeholder:"请输入用户名，设置后将不可更改"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),e.model&&e.model.id?e._e():a("a-form-model-item",{attrs:{label:"密码",placeholder:"请输入密码，6-20位",prop:"password"}},[a("a-input",{model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("a-form-model-item",{attrs:{label:"昵称",prop:"nickname"}},[a("a-input",{model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),a("a-form-model-item",{attrs:{label:"全称",prop:"fullName"}},[a("a-input",{model:{value:e.model.fullName,callback:function(t){e.$set(e.model,"fullName",t)},expression:"model.fullName"}})],1),a("a-form-model-item",{attrs:{label:"角色",prop:"roleIds"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择角色"},model:{value:e.model.roleIds,callback:function(t){e.$set(e.model,"roleIds",t)},expression:"model.roleIds"}},e._l(e.roleList,(function(t){return a("a-select-option",{key:t.id},[e._v(e._s(t.description))])})),1)],1),a("a-form-model-item",{attrs:{label:"介绍",prop:"introduction"}},[a("a-input",{attrs:{type:"textarea"},model:{value:e.model.introduction,callback:function(t){e.$set(e.model,"introduction",t)},expression:"model.introduction"}})],1)],1)],1)],1)},u=[],d=a("cc5e"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,"custom-request":e.customUpload,"before-upload":e.beforeUpload,remove:e.handleRemove},on:{change:e.handleChange}},[e.file?a("img",{style:"height: "+e.height+"px",attrs:{src:e.file,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.uploadLoading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1)]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},f=[],p=(a("a9e3"),a("d3b7"),a("96cf"),a("1da1")),v=a("35e0");function h(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var b={props:{file:{type:String,require:!0,default:function(){return null}},height:{type:Number,require:!1,default:function(){return 150}}},data:function(){return{previewVisible:!1,previewImage:"",uploadLoading:!1}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,h(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},handleRemove:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("update:file",null),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),t&&a},customUpload:function(e){var t=this;this.uploadLoading=!0;var a=new FormData;a.append("file",e.file),Object(v["a"])(a).then((function(e){200===e.code&&(t.$emit("update:file",e.data),t.uploadLoading=!1)})).catch((function(e){t.$message.error("上传失败!"),t.uploadLoading=!1}))}}},g=b,y=(a("bbed"),a("2877")),w=Object(y["a"])(g,m,f,!1,null,null,null),x=w.exports,k=a("918b"),_={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},components:{SingleUpload:x,CUpload:k["a"]},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:{},roleList:[],uploadLoading:!1,rules:{fullName:[{required:!0,message:"请输入全称",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],roleIds:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){this.loadRoles()},methods:{loadRoles:function(){var e=this;Object(d["c"])().then((function(t){e.roleList=t.data}))},handleChange:function(e){"uploading"===e.file.status&&(this.uploadLoading=!0)}}},$=_,P=Object(y["a"])($,c,u,!1,null,null,null),q=P.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{width:600,visible:e.visible,footer:null,closable:!1,keyboard:!1,maskClosable:!1}},[a("a-result",{attrs:{status:"success",title:"重置成功"},scopedSlots:e._u([{key:"subTitle",fn:function(){return[a("p",[e._v("请复制后保存，关闭后将无法查看")]),a("p",{staticStyle:{"font-size":"20px","text-align":"center","letter-spacing":"4px","line-height":"40px"}},[e._v(" "+e._s(e.text)+" ")])]},proxy:!0},{key:"extra",fn:function(){return[a("a-button",{key:"console",attrs:{disabled:!e.closeButton,type:"primary"},on:{click:function(){e.$emit("cancel")}}},[e._v(" "+e._s(e.closeButton?"关闭":"关闭 "+e.time+"s")+" ")])]},proxy:!0}])})],1)],1)},L=[],O={props:{visible:{type:Boolean,required:!0},text:{type:String,required:!0}},data:function(){return{time:5,closeButton:!1}},created:function(){},methods:{},watch:{text:function(e,t){var a=this,n=window.setInterval((function(){a.time--<=1&&(a.closeButton=!0,window.clearInterval(n))}),1e3)}}},j=O,S=Object(y["a"])(j,R,L,!1,null,"13c7b795",null),C=S.exports,I={name:"User",components:{STable:l["b"],CreateForm:q,ResetResult:C},data:function(){var e=this;return{visible:!1,confirmLoading:!1,mdl:{},advanced:!1,queryParam:{},columns:[{title:"头像",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"用户名",dataIndex:"username"},{title:"全名",dataIndex:"fullName"},{title:"介绍",dataIndex:"introduction"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",width:"220px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(s["d"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},resetResultVisible:!1,resultPwd:""}},created:function(){this.loadData({t:new Date})},methods:{handleAdd:function(){this.mdl={},this.visible=!0},handleEdit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.mdl=Object.assign({},e)}))},handleResetPassword:function(e){var t=this;Object(s["e"])(e.id).then((function(e){200===e.code&&(t.resetResultVisible=!0,t.resultPwd=e.data)}))},handleOk:function(){var e=this,t=this.$refs.createModal.$refs.form;this.confirmLoading=!0,t.validate((function(t){if(!t)return e.confirmLoading=!1,!1;e.mdl.id?Object(s["f"])(e.mdl).then((function(t){e.visible=!1,e.confirmLoading=!1,e.resetForm(),e.$refs.table.refresh(),e.$message.info("修改成功")})):Object(s["a"])(e.mdl).then((function(t){e.visible=!1,e.confirmLoading=!1,e.resetForm(),e.$message.info("新增成功")}))}))},toggleAdvanced:function(){this.advanced=!this.advanced},handleCancel:function(){var e=this;this.visible=!1,this.$nextTick((function(){e.resetForm()}))},handleDelete:function(e){var t=this;Object(s["b"])(e.id).then((function(e){200===e.code?(t.$message.info("删除成功！"),t.$refs.table.refresh()):t.$message.err("删除失败！")})).catch((function(e){}))},resetSearchForm:function(){this.queryParam={date:o()(new Date)}},resetForm:function(){var e=this.$refs.createModal.$refs.form;e.clearValidate(),this.mdl={}}}},U=I,N=(a("10bc"),Object(y["a"])(U,n,r,!1,null,null,null));t["default"]=N.exports},fa41:function(e,t,a){}}]);