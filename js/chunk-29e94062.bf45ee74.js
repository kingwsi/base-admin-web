(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29e94062"],{c7b8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"角色名称"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":"0",allowClear:""},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"0"}},[e._v("禁用")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleEditPermission(n)}}},[e._v("权限")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确认删除这条数据？","ok-text":"确认",okType:"danger","cancel-text":"取消",placement:"left"},on:{confirm:function(t){return e.handleDelete(n)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a",{staticStyle:{color:"#ff4d4f"}},[e._v("删除")])],1)]],2)}}])}),a("form-modal",{ref:"formModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},r=[],o=a("5530"),i=a("2af9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.model&&e.model.id?"修改":"新增",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-card",{attrs:{bordered:!1}},[a("a-row",[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-col":{span:5},"wrapper-col":{span:12}}},[e.model.id?a("a-form-model-item",{attrs:{label:"ID"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.id,callback:function(t){e.$set(e.model,"id",t)},expression:"model.id"}})],1):e._e(),a("a-form-model-item",{attrs:{label:"角色名称"}},[a("a-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-form-model-item",{attrs:{label:"角色描述"}},[a("a-input",{model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1)],1)],1)],1)],1)},s=[],c=(a("c119"),a("d865")),d=a("5a70"),u={name:"RoleModal",components:{Tree:c["a"],FooterToolBar:d["a"]},props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return{rules:{name:[{required:!0,message:"请输入角色名称",trigger:"change"}]}}}},m=u,f=a("2877"),p=Object(f["a"])(m,l,s,!1,null,null,null),b=p.exports,h=a("cc5e"),v={name:"TableList",components:{STable:i["b"],FormModal:b},data:function(){var e=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",visible:!1,form:null,mdl:{},confirmLoading:!1,advanced:!1,queryParam:{},columns:[{title:"ID",dataIndex:"id"},{title:"角色名称",dataIndex:"name"},{title:"状态",dataIndex:"status"},{title:"创建时间",dataIndex:"createdDate",sorter:!0},{title:"操作",width:"180px",fixed:"right",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(h["d"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[]}},methods:{handleAdd:function(){this.mdl={},this.visible=!0},handleEdit:function(e){this.visible=!0,this.mdl=Object(o["a"])({},e)},handleOk:function(){var e=this;this.confirmLoading=!0;var t=this.$refs.formModal.$refs.form;t.validate((function(a){a?e.mdl.id?Object(h["e"])(e.mdl).then((function(a){e.confirmLoading=!1,e.visible=!1,e.$message.info("修改成功"),t.resetFields(),e.$refs.table.refresh()})):Object(h["a"])(e.mdl).then((function(a){e.confirmLoading=!1,e.visible=!1,e.$message.info("新增成功"),t.resetFields(),e.$refs.table.refresh()})):e.visible=!1}))},onChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},handleCancel:function(){this.visible=!1;var e=this.$refs.formModal.$refs.form;e.resetFields()},resetSearchForm:function(){this.queryParam={}},handleEditPermission:function(e){this.$router.push({path:"/system/role/permission/".concat(e.id)})}},watch:{}},g=v,y=Object(f["a"])(g,n,r,!1,null,null,null);t["default"]=y.exports},cc5e:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return d}));var n=a("b775"),r={RoleList:"/api/role/page",Permission:"/api/role/resources",Role:"/api/role"};function o(e){return Object(n["b"])({url:r.RoleList,method:"get",params:e})}function i(e){return Object(n["b"])({url:r.Permission,method:"get",params:{id:e}})}function l(e){return Object(n["b"])({url:r.Permission,method:"put",data:e})}function s(e){return Object(n["b"])({url:r.Role,method:"post",data:e})}function c(e){return Object(n["b"])({url:r.Role,method:"put",data:e})}function d(e){return Object(n["b"])({url:"".concat(r.Role,"/list"),method:"get",params:e})}}}]);